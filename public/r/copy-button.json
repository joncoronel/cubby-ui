{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "copy-button",
  "type": "registry:ui",
  "title": "Copy Button",
  "description": "A copy-button component.",
  "dependencies": [
    "lucide-react",
    "@hugeicons/react",
    "@hugeicons/core-free-icons"
  ],
  "registryDependencies": [
    "@cubby-ui/button"
  ],
  "files": [
    {
      "path": "registry/default/copy-button/copy-button.tsx",
      "content": "\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Button } from \"@/registry/default/button/button\";\nimport { Copy, Check } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { copyToClipboard } from \"@/registry/default/copy-button/lib/copy-to-clipboard\";\nimport { HugeiconsIcon } from \"@hugeicons/react\";\nimport { Copy01Icon, Tick02Icon } from \"@hugeicons/core-free-icons\";\n\nexport function useCopyToClipboard(timeout: number = 2000) {\n  const [copied, setCopied] = useState(false);\n\n  // Clean up timeout on unmount or when copied changes\n  useEffect(() => {\n    if (copied) {\n      const timer = setTimeout(() => setCopied(false), timeout);\n      return () => clearTimeout(timer);\n    }\n  }, [copied, timeout]);\n\n  const copy = async (text: string) => {\n    const success = await copyToClipboard(text);\n    if (success) {\n      setCopied(true);\n    }\n  };\n\n  return { copied, copy };\n}\n\ninterface CopyButtonProps\n  extends Omit<\n    React.ComponentProps<typeof Button>,\n    \"onClick\" | \"children\" | \"size\" | \"variant\"\n  > {\n  content: string;\n  timeout?: number;\n  copyIcon?: React.ReactNode;\n  checkIcon?: React.ReactNode;\n}\n\nfunction CopyButton({\n  content,\n  timeout = 2000,\n  className,\n  copyIcon,\n  checkIcon,\n  ...props\n}: CopyButtonProps) {\n  const { copied, copy } = useCopyToClipboard(timeout);\n\n  const defaultCopyIcon = (\n    <HugeiconsIcon icon={Copy01Icon} strokeWidth={2} className=\"size-4\" />\n  );\n  const defaultCheckIcon = (\n    <HugeiconsIcon\n      icon={Tick02Icon}\n      strokeWidth={2}\n      className=\"size-4 text-green-500\"\n    />\n  );\n\n  return (\n    <Button\n      data-slot=\"copy-button\"\n      size=\"icon_xs\"\n      variant=\"ghost\"\n      onClick={() => copy(content)}\n      className={cn(\n        \"text-muted-foreground size-auto rounded-md p-1.5 [grid-template-areas:'stack'] [&>span]:grid [&>span]:place-content-center [&>span]:p-0\",\n        className,\n      )}\n      aria-label={copied ? \"Copied to clipboard\" : \"Copy to clipboard\"}\n      title={copied ? \"Copied!\" : \"Copy\"}\n      {...props}\n    >\n      {/* Copy Icon - Exits with scale down, fade, and blur */}\n      <span\n        aria-hidden=\"true\"\n        className={cn(\n          \"ease flex items-center justify-center blur-none transition-[scale,opacity,filter] delay-0 duration-300 [grid-area:stack]\",\n          copied && \"scale-50 opacity-0 blur-xs delay-0\",\n        )}\n      >\n        {copyIcon ?? defaultCopyIcon}\n      </span>\n\n      {/* Check Icon - Enters with scale up and fade in */}\n      <span\n        aria-hidden=\"true\"\n        className={cn(\n          \"ease flex scale-50 items-center justify-center opacity-0 blur-xs transition-[scale,opacity,filter] delay-0 duration-300 [grid-area:stack]\",\n          copied && \"scale-100 opacity-100 blur-none delay-0\",\n        )}\n      >\n        {checkIcon ?? defaultCheckIcon}\n      </span>\n    </Button>\n  );\n}\n\nexport { CopyButton };\n",
      "type": "registry:ui",
      "target": "components/ui/cubby-ui/copy-button.tsx"
    },
    {
      "path": "registry/default/copy-button/lib/copy-to-clipboard.ts",
      "content": "export async function copyToClipboard(text: string): Promise<boolean> {\n  try {\n    // Try modern Clipboard API first\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch {\n    // Fallback to legacy execCommand method\n    try {\n      const textarea = document.createElement(\"textarea\");\n      textarea.value = text;\n      textarea.style.position = \"fixed\";\n      textarea.style.opacity = \"0\";\n      document.body.appendChild(textarea);\n      textarea.select();\n\n      const success = document.execCommand(\"copy\");\n      document.body.removeChild(textarea);\n\n      return success;\n    } catch {\n      return false;\n    }\n  }\n}\n",
      "type": "registry:lib",
      "target": "lib/cubby-ui/copy-to-clipboard.ts"
    }
  ]
}