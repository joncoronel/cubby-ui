{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "toast",
  "type": "registry:ui",
  "title": "Toast",
  "description": "A toast component.",
  "dependencies": [
    "clsx"
  ],
  "files": [
    {
      "path": "registry/default/toast/toast.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { Toast } from \"@base-ui/react/toast\";\nimport { clsx } from \"clsx\";\n\nexport interface ToastOptions<TData = unknown> {\n  title?: string;\n  description?: string; // Made optional to support JSX-only toasts\n  type?: \"default\" | \"success\" | \"error\" | \"warning\" | \"info\";\n  duration?: number;\n  priority?: \"low\" | \"high\"; // Priority support from Base UI\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n  data?: TData; // Custom data support\n  onClose?: () => void; // Lifecycle callback\n  onRemove?: () => void; // Lifecycle callback\n}\n\ninterface ToastData {\n  id: string;\n  title?: string;\n  description?: string;\n  type?: \"default\" | \"success\" | \"error\" | \"warning\" | \"info\";\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n  data?: unknown; // Custom data that can be used in rendering logic\n}\n\n// Global toast manager instance\nlet toastManagerInstance: ReturnType<typeof Toast.useToastManager> | null =\n  null;\n\nconst setToastManager = (manager: ReturnType<typeof Toast.useToastManager>) => {\n  toastManagerInstance = manager;\n};\n\n// Overloaded function signatures for JSX support\nfunction baseToast(jsx: React.ReactElement): string | undefined;\nfunction baseToast<TData = unknown>(\n  jsx: React.ReactElement,\n  options: Omit<ToastOptions<TData>, \"title\" | \"description\">,\n): string | undefined;\nfunction baseToast<TData = unknown>(\n  options: ToastOptions<TData>,\n): string | undefined;\n\nfunction baseToast<TData = unknown>(\n  optionsOrJSX: ToastOptions<TData> | React.ReactElement,\n  jsxOptions?: Omit<ToastOptions<TData>, \"title\" | \"description\">,\n): string | undefined {\n  if (!toastManagerInstance) {\n    console.error(\n      \"Toast manager not initialized. Make sure ToastProvider is wrapping your app.\",\n    );\n    return;\n  }\n\n  // Handle JSX element passed directly (with optional options)\n  if (React.isValidElement(optionsOrJSX)) {\n    return toastManagerInstance.add({\n      title: \"\", // Empty title for JSX toasts\n      description: \"\", // Empty description - JSX will be rendered as custom content\n      type: jsxOptions?.type || \"default\",\n      timeout: jsxOptions?.duration || undefined,\n      priority: jsxOptions?.priority || \"low\",\n      ...(jsxOptions?.action && {\n        actionProps: {\n          children: jsxOptions.action.label,\n          onClick: jsxOptions.action.onClick,\n        },\n      }),\n      data: {\n        customJSX: optionsOrJSX,\n        ...(jsxOptions?.data && jsxOptions.data), // Merge any additional data\n      },\n      ...(jsxOptions?.onClose && { onClose: jsxOptions.onClose }),\n      ...(jsxOptions?.onRemove && { onRemove: jsxOptions.onRemove }),\n    });\n  }\n\n  // Handle options object\n  const options = optionsOrJSX as ToastOptions<TData>;\n  return toastManagerInstance.add({\n    title: options.title,\n    description: options.description || \"\",\n    type: options.type || \"default\",\n    timeout: options.duration || undefined,\n    priority: options.priority || \"low\",\n    ...(options.action && {\n      actionProps: {\n        children: options.action.label,\n        onClick: options.action.onClick,\n      },\n    }),\n    ...(options.data && { data: options.data }), // Pass custom data\n    ...(options.onClose && { onClose: options.onClose }),\n    ...(options.onRemove && { onRemove: options.onRemove }),\n  });\n}\n\nconst promise = async <T,>(\n  promiseToResolve: Promise<T>,\n  messages: {\n    loading: string;\n    success: string | ((data: T) => string);\n    error: string | ((error: Error) => string);\n  },\n) => {\n  if (!toastManagerInstance) {\n    console.error(\n      \"Toast manager not initialized. Make sure ToastProvider is wrapping your app.\",\n    );\n    return;\n  }\n\n  return toastManagerInstance.promise(promiseToResolve, {\n    loading: messages.loading,\n    success: messages.success,\n    error: messages.error,\n  });\n};\n\n// Create the toast object with methods like Sonner\nexport const toast = Object.assign(baseToast, {\n  success: <TData = unknown,>(\n    optionsOrJSX: Omit<ToastOptions<TData>, \"type\"> | React.ReactElement,\n    jsxOptions?: Omit<ToastOptions<TData>, \"title\" | \"description\" | \"type\">,\n  ) => {\n    if (React.isValidElement(optionsOrJSX)) {\n      return baseToast(optionsOrJSX, { ...jsxOptions, type: \"success\" });\n    }\n    const options = optionsOrJSX as Omit<ToastOptions<TData>, \"type\">;\n    return baseToast({ ...options, type: \"success\" });\n  },\n  error: <TData = unknown,>(\n    optionsOrJSX: Omit<ToastOptions<TData>, \"type\"> | React.ReactElement,\n    jsxOptions?: Omit<ToastOptions<TData>, \"title\" | \"description\" | \"type\">,\n  ) => {\n    if (React.isValidElement(optionsOrJSX)) {\n      return baseToast(optionsOrJSX, { ...jsxOptions, type: \"error\" });\n    }\n    const options = optionsOrJSX as Omit<ToastOptions<TData>, \"type\">;\n    return baseToast({ ...options, type: \"error\" });\n  },\n  warning: <TData = unknown,>(\n    optionsOrJSX: Omit<ToastOptions<TData>, \"type\"> | React.ReactElement,\n    jsxOptions?: Omit<ToastOptions<TData>, \"title\" | \"description\" | \"type\">,\n  ) => {\n    if (React.isValidElement(optionsOrJSX)) {\n      return baseToast(optionsOrJSX, { ...jsxOptions, type: \"warning\" });\n    }\n    const options = optionsOrJSX as Omit<ToastOptions<TData>, \"type\">;\n    return baseToast({ ...options, type: \"warning\" });\n  },\n  info: <TData = unknown,>(\n    optionsOrJSX: Omit<ToastOptions<TData>, \"type\"> | React.ReactElement,\n    jsxOptions?: Omit<ToastOptions<TData>, \"title\" | \"description\" | \"type\">,\n  ) => {\n    if (React.isValidElement(optionsOrJSX)) {\n      return baseToast(optionsOrJSX, { ...jsxOptions, type: \"info\" });\n    }\n    const options = optionsOrJSX as Omit<ToastOptions<TData>, \"type\">;\n    return baseToast({ ...options, type: \"info\" });\n  },\n  promise,\n  dismiss: (toastId: string) => {\n    if (!toastManagerInstance) {\n      console.error(\n        \"Toast manager not initialized. Make sure ToastProvider is wrapping your app.\",\n      );\n      return;\n    }\n    return toastManagerInstance.close(toastId);\n  },\n  update: (toastId: string, options: Partial<ToastOptions>) => {\n    if (!toastManagerInstance) {\n      console.error(\n        \"Toast manager not initialized. Make sure ToastProvider is wrapping your app.\",\n      );\n      return;\n    }\n    // Extract only the properties that Base UI's update method expects\n    const updateOptions: Record<string, unknown> = {};\n    if (options.title !== undefined) updateOptions.title = options.title;\n    if (options.description !== undefined)\n      updateOptions.description = options.description;\n    if (options.type !== undefined) updateOptions.type = options.type;\n    if (options.data !== undefined) updateOptions.data = options.data;\n\n    return toastManagerInstance.update(toastId, updateOptions);\n  },\n  custom: <TData = unknown,>(options: ToastOptions<TData>) =>\n    baseToast(options), // Explicit custom method for clarity\n});\n\nexport type ToastPosition =\n  | \"top-left\"\n  | \"top-center\"\n  | \"top-right\"\n  | \"bottom-left\"\n  | \"bottom-center\"\n  | \"bottom-right\";\n\ninterface ToastProviderProps {\n  children: React.ReactNode;\n  position?: ToastPosition;\n  limit?: number; // Maximum number of toasts (default: 3)\n  timeout?: number; // Default timeout for toasts in ms (default: 5000)\n  toastManager?: ReturnType<typeof Toast.createToastManager>; // Global toast manager\n  container?: HTMLElement | React.RefObject<HTMLElement | null> | null; // Portal container\n}\n\nconst positionClasses: Record<ToastPosition, string> = {\n  \"top-left\": \"fixed top-[1rem] left-[1rem] bottom-auto right-auto\",\n  \"top-center\": \"fixed top-[1rem] left-0 right-0 bottom-auto mx-auto\",\n  \"top-right\": \"fixed top-[1rem] right-[1rem] bottom-auto left-auto\",\n  \"bottom-left\": \"fixed bottom-[1rem] left-[1rem] top-auto right-auto\",\n  \"bottom-center\": \"fixed bottom-[1rem] left-0 right-0 top-auto mx-auto\",\n  \"bottom-right\": \"fixed bottom-[1rem] right-[1rem] top-auto left-auto\",\n};\n\nexport function ToastProvider({\n  children,\n  position = \"bottom-right\",\n  limit = 3,\n  timeout = 5000,\n  toastManager,\n  container,\n}: ToastProviderProps) {\n  return (\n    <Toast.Provider limit={limit} timeout={timeout} toastManager={toastManager}>\n      {children}\n      <Toast.Portal container={container}>\n        <Toast.Viewport\n          className={clsx(\n            positionClasses[position],\n            \"flex w-[250px] max-w-[calc(100vw-2rem)] sm:w-[300px]\",\n          )}\n          data-position={position}\n        >\n          <ToastList position={position} />\n        </Toast.Viewport>\n      </Toast.Portal>\n    </Toast.Provider>\n  );\n}\n\nfunction ToastList({ position }: { position: ToastPosition }) {\n  const toastManager = Toast.useToastManager();\n  const { toasts } = toastManager;\n\n  // Initialize the global toast manager\n  React.useEffect(() => {\n    setToastManager(toastManager);\n  }, [toastManager]);\n\n  const isTop = position.startsWith(\"top\");\n\n  // Determine swipe directions based on position\n  let swipeDirection:\n    | (\"up\" | \"down\" | \"left\" | \"right\")\n    | (\"up\" | \"down\" | \"left\" | \"right\")[];\n\n  switch (position) {\n    case \"top-left\":\n      swipeDirection = [\"left\", \"up\"]; // Can swipe left or up\n      break;\n    case \"top-center\":\n      swipeDirection = \"up\"; // Only swipe up\n      break;\n    case \"top-right\":\n      swipeDirection = [\"right\", \"up\"]; // Can swipe right or up\n      break;\n    case \"bottom-left\":\n      swipeDirection = [\"left\", \"down\"]; // Can swipe left or down\n      break;\n    case \"bottom-center\":\n      swipeDirection = \"down\"; // Only swipe down\n      break;\n    case \"bottom-right\":\n      swipeDirection = [\"right\", \"down\"]; // Can swipe right or down (default)\n      break;\n    default:\n      swipeDirection = [\"right\", \"down\"];\n  }\n\n  return toasts.map((toast) => {\n    const toastData = toast as ToastData;\n    const type = toastData.type || \"default\";\n\n    // Check if this is a custom JSX toast\n    const hasCustomJSX =\n      toastData.data &&\n      typeof toastData.data === \"object\" &&\n      \"customJSX\" in toastData.data;\n\n    return (\n      <Toast.Root\n        key={toast.id}\n        toast={toast}\n        swipeDirection={swipeDirection}\n        className={clsx(\n          // CSS variables\n          \"[--gap:0.75rem] [--peek:0.75rem]\",\n          \"[--scale:calc(max(0,1-(var(--toast-index)*0.1)))]\",\n          \"[--shrink:calc(1-var(--scale))]\",\n          \"[--height:var(--toast-frontmost-height,var(--toast-height))]\",\n          isTop\n            ? \"[--offset-y:calc(var(--toast-offset-y)+(var(--toast-index)*var(--gap))+var(--toast-swipe-movement-y))]\"\n            : \"[--offset-y:calc(var(--toast-offset-y)*-1+(var(--toast-index)*var(--gap)*-1)+var(--toast-swipe-movement-y))]\",\n          // Position\n          \"absolute z-[calc(1000-var(--toast-index))] w-full\",\n          isTop ? \"top-0 right-0 left-0\" : \"right-0 bottom-0 left-0\",\n          isTop ? \"origin-top\" : \"origin-bottom\",\n          // Default transform\n          isTop\n            ? \"[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--toast-swipe-movement-y)+(var(--toast-index)*var(--peek))+(var(--shrink)*var(--height))))_scale(var(--scale))]\"\n            : \"[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--toast-swipe-movement-y)-(var(--toast-index)*var(--peek))-(var(--shrink)*var(--height))))_scale(var(--scale))]\",\n          // Visual styles\n          \"rounded-md border bg-clip-padding p-4 shadow-[0_6px_20px_0_oklch(0.18_0_0_/_0.12)] select-none\",\n          \"border-border/70\",\n          // After element for spacing\n          'after:absolute after:left-0 after:h-[calc(var(--gap)+1px)] after:w-full after:content-[\"\"]',\n          isTop ? \"after:bottom-full\" : \"after:top-full\",\n          // Opacity\n          \"data-[ending-style]:opacity-0\",\n          // Expanded state\n          \"data-[expanded]:[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--offset-y)))]\",\n          \"data-[limited]:opacity-0\",\n          // Starting animation\n          isTop\n            ? \"data-[starting-style]:[transform:translateY(-150%)]\"\n            : \"data-[starting-style]:[transform:translateY(150%)]\",\n          // Default ending (X button - no swipe)\n          isTop\n            ? \"[&[data-ending-style]:not([data-limited]):not([data-swipe-direction])]:[transform:translateY(-150%)]\"\n            : \"[&[data-ending-style]:not([data-limited]):not([data-swipe-direction])]:[transform:translateY(150%)]\",\n          // Swipe endings\n          \"data-[ending-style]:data-[swipe-direction=down]:[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--toast-swipe-movement-y)+150%))]\",\n          \"data-[expanded]:data-[ending-style]:data-[swipe-direction=down]:[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--toast-swipe-movement-y)+150%))]\",\n          \"data-[ending-style]:data-[swipe-direction=left]:[transform:translateX(calc(var(--toast-swipe-movement-x)-150%))_translateY(var(--offset-y))]\",\n          \"data-[expanded]:data-[ending-style]:data-[swipe-direction=left]:[transform:translateX(calc(var(--toast-swipe-movement-x)-150%))_translateY(var(--offset-y))]\",\n          \"data-[ending-style]:data-[swipe-direction=right]:[transform:translateX(calc(var(--toast-swipe-movement-x)+150%))_translateY(var(--offset-y))]\",\n          \"data-[expanded]:data-[ending-style]:data-[swipe-direction=right]:[transform:translateX(calc(var(--toast-swipe-movement-x)+150%))_translateY(var(--offset-y))]\",\n          \"data-[ending-style]:data-[swipe-direction=up]:[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--toast-swipe-movement-y)-150%))]\",\n          \"data-[expanded]:data-[ending-style]:data-[swipe-direction=up]:[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--toast-swipe-movement-y)-150%))]\",\n          // Height\n          \"h-[var(--height)]\",\n          \"data-[expanded]:h-[var(--toast-height)]\",\n          // Transitions\n          \"[transition:transform_0.5s_cubic-bezier(0.22,1,0.36,1),opacity_0.5s,height_0.15s]\",\n          // Type-based colors\n          {\n            \"border-border bg-card text-card-foreground\": type === \"default\",\n            \"border-success-border bg-success text-success-foreground\":\n              type === \"success\",\n            \"border-danger-border bg-danger text-danger-foreground\":\n              type === \"error\",\n            \"border-warning-border bg-warning text-warning-foreground\":\n              type === \"warning\",\n            \"border-info-border bg-info text-info-foreground\": type === \"info\",\n          },\n        )}\n      >\n        <Toast.Content\n          className={clsx(\n            \"overflow-hidden transition-opacity duration-[250ms]\",\n            \"data-[behind]:opacity-0 data-[expanded]:opacity-100\",\n          )}\n        >\n          {hasCustomJSX ? (\n            // Render custom JSX content\n            <div className=\"w-full\">\n              {hasCustomJSX &&\n              toastData.data &&\n              typeof toastData.data === \"object\" &&\n              \"customJSX\" in toastData.data\n                ? (toastData.data as Record<string, React.ReactNode>).customJSX\n                : null}\n            </div>\n          ) : (\n            // Render standard toast content\n            <>\n              <Toast.Title className=\"text-[0.975rem] leading-5 font-medium\" />\n              <Toast.Description className=\"text-[0.925rem] leading-5 text-gray-700 dark:text-gray-300\" />\n              <Toast.Action className=\"ml-auto cursor-pointer text-xs font-medium underline-offset-2 hover:underline\" />\n              <Toast.Close\n                className=\"text-muted-foreground hover:bg-accent/50 hover:text-foreground absolute top-2.5 right-2.5 flex h-6 w-6 items-center justify-center rounded-md border-none bg-transparent transition-colors duration-200\"\n                aria-label=\"Close\"\n              >\n                <XIcon className=\"h-4 w-4\" />\n              </Toast.Close>\n            </>\n          )}\n        </Toast.Content>\n      </Toast.Root>\n    );\n  });\n}\n\nfunction XIcon(props: React.ComponentProps<\"svg\">) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      {...props}\n    >\n      <path d=\"M18 6 6 18\" />\n      <path d=\"m6 6 12 12\" />\n    </svg>\n  );\n}\n\nexport { Toast };\n",
      "type": "registry:ui",
      "target": "components/ui/cubby-ui/toast.tsx"
    }
  ]
}