{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "form",
  "type": "registry:ui",
  "title": "Form",
  "description": "A form component.",
  "dependencies": [
    "@conform-to/react"
  ],
  "registryDependencies": [
    "@cubby-ui/label"
  ],
  "files": [
    {
      "path": "registry/default/form/form.tsx",
      "content": "\"use client\";\r\n\r\n/**\r\n * Conform-based Form Components\r\n *\r\n * Usage example:\r\n *\r\n * ```tsx\r\n * import { useForm } from \"@conform-to/react\"\r\n * import { parseWithZod } from \"@conform-to/zod\"\r\n * import { z } from \"zod\"\r\n * import { Input } from \"@/registry/default/input/input\"\r\n *\r\n * const schema = z.object({\r\n *   email: z.string().email(),\r\n *   password: z.string().min(6)\r\n * })\r\n *\r\n * function MyForm() {\r\n *   const [form, fields] = useForm({\r\n *     onValidate({ formData }) {\r\n *       return parseWithZod(formData, { schema })\r\n *     }\r\n *   })\r\n *\r\n *   return (\r\n *     <Form form={form} fields={fields}>\r\n *       <FormField name=\"email\">\r\n *         <FormItem>\r\n *           <FormLabel>Email</FormLabel>\r\n *           <FormControl>\r\n *             <Input\r\n *               type=\"email\"\r\n *               name={fields.email.name}\r\n *               defaultValue={fields.email.initialValue}\r\n *               placeholder=\"Enter your email\"\r\n *             />\r\n *           </FormControl>\r\n *           <FormDescription>Enter your email address</FormDescription>\r\n *           <FormMessage />\r\n *         </FormItem>\r\n *       </FormField>\r\n *       <FormField name=\"password\">\r\n *         <FormItem>\r\n *           <FormLabel>Password</FormLabel>\r\n *           <FormControl>\r\n *             <Input\r\n *               type=\"password\"\r\n *               name={fields.password.name}\r\n *               defaultValue={fields.password.initialValue}\r\n *               placeholder=\"Enter your password\"\r\n *             />\r\n *           </FormControl>\r\n *           <FormDescription>Must be at least 6 characters</FormDescription>\r\n *           <FormMessage />\r\n *         </FormItem>\r\n *       </FormField>\r\n *       <button type=\"submit\">Submit</button>\r\n *     </Form>\r\n *   )\r\n * }\r\n * ```\r\n */\r\n\r\nimport * as React from \"react\";\r\nimport { useForm, type FieldMetadata } from \"@conform-to/react\";\r\nimport { Label } from \"@/registry/default/label/label\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n// Form context for sharing form instance\r\ntype FormContextValue = {\r\n  form: ReturnType<typeof useForm>[0];\r\n  fields: Record<string, FieldMetadata>;\r\n};\r\n\r\nconst FormContext = React.createContext<FormContextValue | null>(null);\r\n\r\n// Form provider component\r\nfunction Form({\r\n  form,\r\n  fields,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<\"form\"> & {\r\n  form: ReturnType<typeof useForm>[0];\r\n  fields: Record<string, FieldMetadata>;\r\n}) {\r\n  return (\r\n    <FormContext.Provider value={{ form, fields }}>\r\n      <form id={form.id} onSubmit={form.onSubmit} {...props}>\r\n        {children}\r\n      </form>\r\n    </FormContext.Provider>\r\n  );\r\n}\r\n\r\n// Hook to access form context\r\nconst useFormField = (name: string) => {\r\n  const context = React.useContext(FormContext);\r\n  const itemContext = React.useContext(FormItemContext);\r\n\r\n  if (!context) {\r\n    throw new Error(\"useFormField should be used within <Form>\");\r\n  }\r\n\r\n  const { fields } = context;\r\n  const field = fields[name];\r\n\r\n  if (!field) {\r\n    throw new Error(`Field \"${name}\" not found in form fields`);\r\n  }\r\n\r\n  const { id } = itemContext;\r\n\r\n  return {\r\n    id,\r\n    name: field.name,\r\n    formItemId: `${id}-form-item`,\r\n    formDescriptionId: `${id}-form-item-description`,\r\n    formMessageId: `${id}-form-item-message`,\r\n    error: field.errors?.[0],\r\n    errors: field.errors,\r\n    initialValue: field.initialValue,\r\n    value: field.value,\r\n    key: field.key,\r\n  };\r\n};\r\n\r\n// Form field wrapper\r\nfunction FormField({\r\n  name,\r\n  children,\r\n}: {\r\n  name: string;\r\n  children: React.ReactNode;\r\n}) {\r\n  return <FormFieldProvider name={name}>{children}</FormFieldProvider>;\r\n}\r\n\r\n// Form field context\r\ntype FormFieldContextValue = {\r\n  name: string;\r\n};\r\n\r\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(\r\n  null,\r\n);\r\n\r\nfunction FormFieldProvider({\r\n  name,\r\n  children,\r\n}: {\r\n  name: string;\r\n  children: React.ReactNode;\r\n}) {\r\n  return (\r\n    <FormFieldContext.Provider value={{ name }}>\r\n      {children}\r\n    </FormFieldContext.Provider>\r\n  );\r\n}\r\n\r\n// Form item context\r\ntype FormItemContextValue = {\r\n  id: string;\r\n};\r\n\r\nconst FormItemContext = React.createContext<FormItemContextValue>(\r\n  {} as FormItemContextValue,\r\n);\r\n\r\nfunction FormItem({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  const id = React.useId();\r\n\r\n  return (\r\n    <FormItemContext.Provider value={{ id }}>\r\n      <div\r\n        data-slot=\"form-item\"\r\n        className={cn(\"group grid gap-2\", className)}\r\n        {...props}\r\n      />\r\n    </FormItemContext.Provider>\r\n  );\r\n}\r\n\r\nfunction FormLabel({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof Label>) {\r\n  const fieldContext = React.useContext(FormFieldContext);\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"FormLabel should be used within <FormField>\");\r\n  }\r\n\r\n  const { error, formItemId } = useFormField(fieldContext.name);\r\n\r\n  return (\r\n    <Label\r\n      data-slot=\"form-label\"\r\n      data-error={!!error}\r\n      className={cn(\"data-[error=true]:text-destructive\", className)}\r\n      htmlFor={formItemId}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction FormControl({ ...props }: React.ComponentProps<\"div\">) {\r\n  const fieldContext = React.useContext(FormFieldContext);\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"FormControl should be used within <FormField>\");\r\n  }\r\n\r\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField(\r\n    fieldContext.name,\r\n  );\r\n\r\n  return (\r\n    <div\r\n      data-slot=\"form-control\"\r\n      id={formItemId}\r\n      aria-describedby={\r\n        !error\r\n          ? `${formDescriptionId}`\r\n          : `${formDescriptionId} ${formMessageId}`\r\n      }\r\n      aria-invalid={!!error}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction FormDescription({ className, ...props }: React.ComponentProps<\"p\">) {\r\n  const fieldContext = React.useContext(FormFieldContext);\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"FormDescription should be used within <FormField>\");\r\n  }\r\n\r\n  const { formDescriptionId } = useFormField(fieldContext.name);\r\n\r\n  return (\r\n    <p\r\n      data-slot=\"form-description\"\r\n      id={formDescriptionId}\r\n      className={cn(\"text-muted-foreground text-sm\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nfunction FormMessage({ className, ...props }: React.ComponentProps<\"p\">) {\r\n  const fieldContext = React.useContext(FormFieldContext);\r\n\r\n  if (!fieldContext) {\r\n    throw new Error(\"FormMessage should be used within <FormField>\");\r\n  }\r\n\r\n  const { error, formMessageId } = useFormField(fieldContext.name);\r\n  const body = error ? String(error) : props.children;\r\n\r\n  if (!body) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <p\r\n      data-slot=\"form-message\"\r\n      id={formMessageId}\r\n      className={cn(\"text-destructive text-sm\", className)}\r\n      {...props}\r\n    >\r\n      {body}\r\n    </p>\r\n  );\r\n}\r\n\r\nexport {\r\n  useFormField,\r\n  Form,\r\n  FormItem,\r\n  FormLabel,\r\n  FormControl,\r\n  FormDescription,\r\n  FormMessage,\r\n  FormField,\r\n};\r\n",
      "type": "registry:ui",
      "target": "components/ui/cubby-ui/form.tsx"
    }
  ]
}