{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "copy-button",
  "type": "registry:ui",
  "title": "Copy Button",
  "description": "A copy-button component.",
  "dependencies": [
    "lucide-react",
    "@hugeicons/react",
    "@hugeicons/core-free-icons"
  ],
  "registryDependencies": [
    "@cubby-ui/button"
  ],
  "files": [
    {
      "path": "registry/default/copy-button/copy-button.tsx",
      "content": "\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { Button } from \"@/registry/default/button/button\";\r\nimport { Copy, Check } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { copyToClipboard } from \"@/registry/default/copy-button/lib/copy-to-clipboard\";\r\nimport { HugeiconsIcon } from \"@hugeicons/react\";\r\nimport { Copy01Icon, Tick02Icon } from \"@hugeicons/core-free-icons\";\r\n\r\nexport function useCopyToClipboard(timeout: number = 2000) {\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  // Clean up timeout on unmount or when copied changes\r\n  useEffect(() => {\r\n    if (copied) {\r\n      const timer = setTimeout(() => setCopied(false), timeout);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [copied, timeout]);\r\n\r\n  const copy = async (text: string) => {\r\n    const success = await copyToClipboard(text);\r\n    if (success) {\r\n      setCopied(true);\r\n    }\r\n  };\r\n\r\n  return { copied, copy };\r\n}\r\n\r\ninterface CopyButtonProps\r\n  extends Omit<\r\n    React.ComponentProps<typeof Button>,\r\n    \"onClick\" | \"children\" | \"size\" | \"variant\"\r\n  > {\r\n  content: string;\r\n  timeout?: number;\r\n  copyIcon?: React.ReactNode;\r\n  checkIcon?: React.ReactNode;\r\n}\r\n\r\nfunction CopyButton({\r\n  content,\r\n  timeout = 2000,\r\n  className,\r\n  copyIcon,\r\n  checkIcon,\r\n  ...props\r\n}: CopyButtonProps) {\r\n  const { copied, copy } = useCopyToClipboard(timeout);\r\n\r\n  const defaultCopyIcon = (\r\n    <HugeiconsIcon icon={Copy01Icon} strokeWidth={2} className=\"size-4\" />\r\n  );\r\n  const defaultCheckIcon = (\r\n    <HugeiconsIcon\r\n      icon={Tick02Icon}\r\n      strokeWidth={2}\r\n      className=\"size-4 text-green-500\"\r\n    />\r\n  );\r\n\r\n  return (\r\n    <Button\r\n      data-slot=\"copy-button\"\r\n      size=\"icon_xs\"\r\n      variant=\"ghost\"\r\n      onClick={() => copy(content)}\r\n      className={cn(\r\n        \"text-muted-foreground size-auto rounded-md p-1.5 [grid-template-areas:'stack'] [&>span]:grid [&>span]:place-content-center [&>span]:p-0\",\r\n        className,\r\n      )}\r\n      aria-label={copied ? \"Copied to clipboard\" : \"Copy to clipboard\"}\r\n      title={copied ? \"Copied!\" : \"Copy\"}\r\n      {...props}\r\n    >\r\n      {/* Copy Icon - Exits with scale down, fade, and blur */}\r\n      <span\r\n        aria-hidden=\"true\"\r\n        className={cn(\r\n          \"ease flex items-center justify-center blur-none transition-[scale,opacity,filter] delay-0 duration-300 [grid-area:stack]\",\r\n          copied && \"scale-50 opacity-0 blur-xs delay-0\",\r\n        )}\r\n      >\r\n        {copyIcon ?? defaultCopyIcon}\r\n      </span>\r\n\r\n      {/* Check Icon - Enters with scale up and fade in */}\r\n      <span\r\n        aria-hidden=\"true\"\r\n        className={cn(\r\n          \"ease flex scale-50 items-center justify-center opacity-0 blur-xs transition-[scale,opacity,filter] delay-0 duration-300 [grid-area:stack]\",\r\n          copied && \"scale-100 opacity-100 blur-none delay-0\",\r\n        )}\r\n      >\r\n        {checkIcon ?? defaultCheckIcon}\r\n      </span>\r\n    </Button>\r\n  );\r\n}\r\n\r\nexport { CopyButton };\r\n",
      "type": "registry:ui",
      "target": "components/ui/cubby-ui/copy-button.tsx"
    },
    {
      "path": "registry/default/copy-button/lib/copy-to-clipboard.ts",
      "content": "export async function copyToClipboard(text: string): Promise<boolean> {\r\n  try {\r\n    // Try modern Clipboard API first\r\n    await navigator.clipboard.writeText(text);\r\n    return true;\r\n  } catch {\r\n    // Fallback to legacy execCommand method\r\n    try {\r\n      const textarea = document.createElement(\"textarea\");\r\n      textarea.value = text;\r\n      textarea.style.position = \"fixed\";\r\n      textarea.style.opacity = \"0\";\r\n      document.body.appendChild(textarea);\r\n      textarea.select();\r\n\r\n      const success = document.execCommand(\"copy\");\r\n      document.body.removeChild(textarea);\r\n\r\n      return success;\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n",
      "type": "registry:lib",
      "target": "lib/cubby-ui/copy-to-clipboard.ts"
    }
  ]
}