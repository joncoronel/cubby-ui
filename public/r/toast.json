{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "toast",
  "type": "registry:ui",
  "title": "Toast",
  "description": "A toast component.",
  "dependencies": [
    "clsx"
  ],
  "files": [
    {
      "path": "registry/default/toast/toast.tsx",
      "content": "\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport { Toast } from \"@base-ui-components/react/toast\";\r\nimport { clsx } from \"clsx\";\r\n\r\nexport interface ToastOptions<TData = unknown> {\r\n  title?: string;\r\n  description?: string; // Made optional to support JSX-only toasts\r\n  type?: \"default\" | \"success\" | \"error\" | \"warning\" | \"info\";\r\n  duration?: number;\r\n  priority?: \"low\" | \"high\"; // Priority support from Base UI\r\n  action?: {\r\n    label: string;\r\n    onClick: () => void;\r\n  };\r\n  data?: TData; // Custom data support\r\n  onClose?: () => void; // Lifecycle callback\r\n  onRemove?: () => void; // Lifecycle callback\r\n}\r\n\r\ninterface ToastData {\r\n  id: string;\r\n  title?: string;\r\n  description?: string;\r\n  type?: \"default\" | \"success\" | \"error\" | \"warning\" | \"info\";\r\n  action?: {\r\n    label: string;\r\n    onClick: () => void;\r\n  };\r\n  data?: unknown; // Custom data that can be used in rendering logic\r\n}\r\n\r\n// Global toast manager instance\r\nlet toastManagerInstance: ReturnType<typeof Toast.useToastManager> | null =\r\n  null;\r\n\r\nconst setToastManager = (manager: ReturnType<typeof Toast.useToastManager>) => {\r\n  toastManagerInstance = manager;\r\n};\r\n\r\n// Overloaded function signatures for JSX support\r\nfunction baseToast(jsx: React.ReactElement): string | undefined;\r\nfunction baseToast<TData = unknown>(\r\n  jsx: React.ReactElement,\r\n  options: Omit<ToastOptions<TData>, \"title\" | \"description\">,\r\n): string | undefined;\r\nfunction baseToast<TData = unknown>(\r\n  options: ToastOptions<TData>,\r\n): string | undefined;\r\n\r\nfunction baseToast<TData = unknown>(\r\n  optionsOrJSX: ToastOptions<TData> | React.ReactElement,\r\n  jsxOptions?: Omit<ToastOptions<TData>, \"title\" | \"description\">,\r\n): string | undefined {\r\n  if (!toastManagerInstance) {\r\n    console.error(\r\n      \"Toast manager not initialized. Make sure ToastProvider is wrapping your app.\",\r\n    );\r\n    return;\r\n  }\r\n\r\n  // Handle JSX element passed directly (with optional options)\r\n  if (React.isValidElement(optionsOrJSX)) {\r\n    return toastManagerInstance.add({\r\n      title: \"\", // Empty title for JSX toasts\r\n      description: \"\", // Empty description - JSX will be rendered as custom content\r\n      type: jsxOptions?.type || \"default\",\r\n      timeout: jsxOptions?.duration || undefined,\r\n      priority: jsxOptions?.priority || \"low\",\r\n      ...(jsxOptions?.action && {\r\n        actionProps: {\r\n          children: jsxOptions.action.label,\r\n          onClick: jsxOptions.action.onClick,\r\n        },\r\n      }),\r\n      data: {\r\n        customJSX: optionsOrJSX,\r\n        ...(jsxOptions?.data && jsxOptions.data), // Merge any additional data\r\n      },\r\n      ...(jsxOptions?.onClose && { onClose: jsxOptions.onClose }),\r\n      ...(jsxOptions?.onRemove && { onRemove: jsxOptions.onRemove }),\r\n    });\r\n  }\r\n\r\n  // Handle options object\r\n  const options = optionsOrJSX as ToastOptions<TData>;\r\n  return toastManagerInstance.add({\r\n    title: options.title,\r\n    description: options.description || \"\",\r\n    type: options.type || \"default\",\r\n    timeout: options.duration || undefined,\r\n    priority: options.priority || \"low\",\r\n    ...(options.action && {\r\n      actionProps: {\r\n        children: options.action.label,\r\n        onClick: options.action.onClick,\r\n      },\r\n    }),\r\n    ...(options.data && { data: options.data }), // Pass custom data\r\n    ...(options.onClose && { onClose: options.onClose }),\r\n    ...(options.onRemove && { onRemove: options.onRemove }),\r\n  });\r\n}\r\n\r\nconst promise = async <T,>(\r\n  promiseToResolve: Promise<T>,\r\n  messages: {\r\n    loading: string;\r\n    success: string | ((data: T) => string);\r\n    error: string | ((error: Error) => string);\r\n  },\r\n) => {\r\n  if (!toastManagerInstance) {\r\n    console.error(\r\n      \"Toast manager not initialized. Make sure ToastProvider is wrapping your app.\",\r\n    );\r\n    return;\r\n  }\r\n\r\n  return toastManagerInstance.promise(promiseToResolve, {\r\n    loading: messages.loading,\r\n    success: messages.success,\r\n    error: messages.error,\r\n  });\r\n};\r\n\r\n// Create the toast object with methods like Sonner\r\nexport const toast = Object.assign(baseToast, {\r\n  success: <TData = unknown,>(\r\n    optionsOrJSX: Omit<ToastOptions<TData>, \"type\"> | React.ReactElement,\r\n    jsxOptions?: Omit<ToastOptions<TData>, \"title\" | \"description\" | \"type\">,\r\n  ) => {\r\n    if (React.isValidElement(optionsOrJSX)) {\r\n      return baseToast(optionsOrJSX, { ...jsxOptions, type: \"success\" });\r\n    }\r\n    const options = optionsOrJSX as Omit<ToastOptions<TData>, \"type\">;\r\n    return baseToast({ ...options, type: \"success\" });\r\n  },\r\n  error: <TData = unknown,>(\r\n    optionsOrJSX: Omit<ToastOptions<TData>, \"type\"> | React.ReactElement,\r\n    jsxOptions?: Omit<ToastOptions<TData>, \"title\" | \"description\" | \"type\">,\r\n  ) => {\r\n    if (React.isValidElement(optionsOrJSX)) {\r\n      return baseToast(optionsOrJSX, { ...jsxOptions, type: \"error\" });\r\n    }\r\n    const options = optionsOrJSX as Omit<ToastOptions<TData>, \"type\">;\r\n    return baseToast({ ...options, type: \"error\" });\r\n  },\r\n  warning: <TData = unknown,>(\r\n    optionsOrJSX: Omit<ToastOptions<TData>, \"type\"> | React.ReactElement,\r\n    jsxOptions?: Omit<ToastOptions<TData>, \"title\" | \"description\" | \"type\">,\r\n  ) => {\r\n    if (React.isValidElement(optionsOrJSX)) {\r\n      return baseToast(optionsOrJSX, { ...jsxOptions, type: \"warning\" });\r\n    }\r\n    const options = optionsOrJSX as Omit<ToastOptions<TData>, \"type\">;\r\n    return baseToast({ ...options, type: \"warning\" });\r\n  },\r\n  info: <TData = unknown,>(\r\n    optionsOrJSX: Omit<ToastOptions<TData>, \"type\"> | React.ReactElement,\r\n    jsxOptions?: Omit<ToastOptions<TData>, \"title\" | \"description\" | \"type\">,\r\n  ) => {\r\n    if (React.isValidElement(optionsOrJSX)) {\r\n      return baseToast(optionsOrJSX, { ...jsxOptions, type: \"info\" });\r\n    }\r\n    const options = optionsOrJSX as Omit<ToastOptions<TData>, \"type\">;\r\n    return baseToast({ ...options, type: \"info\" });\r\n  },\r\n  promise,\r\n  dismiss: (toastId: string) => {\r\n    if (!toastManagerInstance) {\r\n      console.error(\r\n        \"Toast manager not initialized. Make sure ToastProvider is wrapping your app.\",\r\n      );\r\n      return;\r\n    }\r\n    return toastManagerInstance.close(toastId);\r\n  },\r\n  update: (toastId: string, options: Partial<ToastOptions>) => {\r\n    if (!toastManagerInstance) {\r\n      console.error(\r\n        \"Toast manager not initialized. Make sure ToastProvider is wrapping your app.\",\r\n      );\r\n      return;\r\n    }\r\n    // Extract only the properties that Base UI's update method expects\r\n    const updateOptions: Record<string, unknown> = {};\r\n    if (options.title !== undefined) updateOptions.title = options.title;\r\n    if (options.description !== undefined)\r\n      updateOptions.description = options.description;\r\n    if (options.type !== undefined) updateOptions.type = options.type;\r\n    if (options.data !== undefined) updateOptions.data = options.data;\r\n\r\n    return toastManagerInstance.update(toastId, updateOptions);\r\n  },\r\n  custom: <TData = unknown,>(options: ToastOptions<TData>) =>\r\n    baseToast(options), // Explicit custom method for clarity\r\n});\r\n\r\nexport type ToastPosition =\r\n  | \"top-left\"\r\n  | \"top-center\"\r\n  | \"top-right\"\r\n  | \"bottom-left\"\r\n  | \"bottom-center\"\r\n  | \"bottom-right\";\r\n\r\ninterface ToastProviderProps {\r\n  children: React.ReactNode;\r\n  position?: ToastPosition;\r\n  limit?: number; // Maximum number of toasts (default: 3)\r\n  timeout?: number; // Default timeout for toasts in ms (default: 5000)\r\n  toastManager?: ReturnType<typeof Toast.createToastManager>; // Global toast manager\r\n  container?: HTMLElement | React.RefObject<HTMLElement | null> | null; // Portal container\r\n}\r\n\r\nconst positionClasses: Record<ToastPosition, string> = {\r\n  \"top-left\": \"fixed top-[1rem] left-[1rem] bottom-auto right-auto\",\r\n  \"top-center\": \"fixed top-[1rem] left-0 right-0 bottom-auto mx-auto\",\r\n  \"top-right\": \"fixed top-[1rem] right-[1rem] bottom-auto left-auto\",\r\n  \"bottom-left\": \"fixed bottom-[1rem] left-[1rem] top-auto right-auto\",\r\n  \"bottom-center\": \"fixed bottom-[1rem] left-0 right-0 top-auto mx-auto\",\r\n  \"bottom-right\": \"fixed bottom-[1rem] right-[1rem] top-auto left-auto\",\r\n};\r\n\r\nexport function ToastProvider({\r\n  children,\r\n  position = \"bottom-right\",\r\n  limit = 3,\r\n  timeout = 5000,\r\n  toastManager,\r\n  container,\r\n}: ToastProviderProps) {\r\n  return (\r\n    <Toast.Provider limit={limit} timeout={timeout} toastManager={toastManager}>\r\n      {children}\r\n      <Toast.Portal container={container}>\r\n        <Toast.Viewport\r\n          className={clsx(\r\n            positionClasses[position],\r\n            \"flex w-[250px] max-w-[calc(100vw-2rem)] sm:w-[300px]\",\r\n          )}\r\n          data-position={position}\r\n        >\r\n          <ToastList position={position} />\r\n        </Toast.Viewport>\r\n      </Toast.Portal>\r\n    </Toast.Provider>\r\n  );\r\n}\r\n\r\nfunction ToastList({ position }: { position: ToastPosition }) {\r\n  const toastManager = Toast.useToastManager();\r\n  const { toasts } = toastManager;\r\n\r\n  // Initialize the global toast manager\r\n  React.useEffect(() => {\r\n    setToastManager(toastManager);\r\n  }, [toastManager]);\r\n\r\n  const isTop = position.startsWith(\"top\");\r\n\r\n  // Determine swipe directions based on position\r\n  let swipeDirection:\r\n    | (\"up\" | \"down\" | \"left\" | \"right\")\r\n    | (\"up\" | \"down\" | \"left\" | \"right\")[];\r\n\r\n  switch (position) {\r\n    case \"top-left\":\r\n      swipeDirection = [\"left\", \"up\"]; // Can swipe left or up\r\n      break;\r\n    case \"top-center\":\r\n      swipeDirection = \"up\"; // Only swipe up\r\n      break;\r\n    case \"top-right\":\r\n      swipeDirection = [\"right\", \"up\"]; // Can swipe right or up\r\n      break;\r\n    case \"bottom-left\":\r\n      swipeDirection = [\"left\", \"down\"]; // Can swipe left or down\r\n      break;\r\n    case \"bottom-center\":\r\n      swipeDirection = \"down\"; // Only swipe down\r\n      break;\r\n    case \"bottom-right\":\r\n      swipeDirection = [\"right\", \"down\"]; // Can swipe right or down (default)\r\n      break;\r\n    default:\r\n      swipeDirection = [\"right\", \"down\"];\r\n  }\r\n\r\n  return toasts.map((toast) => {\r\n    const toastData = toast as ToastData;\r\n    const type = toastData.type || \"default\";\r\n\r\n    // Check if this is a custom JSX toast\r\n    const hasCustomJSX =\r\n      toastData.data &&\r\n      typeof toastData.data === \"object\" &&\r\n      \"customJSX\" in toastData.data;\r\n\r\n    return (\r\n      <Toast.Root\r\n        key={toast.id}\r\n        toast={toast}\r\n        swipeDirection={swipeDirection}\r\n        className={clsx(\r\n          // CSS variables\r\n          \"[--gap:0.75rem] [--peek:0.75rem]\",\r\n          \"[--scale:calc(max(0,1-(var(--toast-index)*0.1)))]\",\r\n          \"[--shrink:calc(1-var(--scale))]\",\r\n          \"[--height:var(--toast-frontmost-height,var(--toast-height))]\",\r\n          isTop\r\n            ? \"[--offset-y:calc(var(--toast-offset-y)+(var(--toast-index)*var(--gap))+var(--toast-swipe-movement-y))]\"\r\n            : \"[--offset-y:calc(var(--toast-offset-y)*-1+(var(--toast-index)*var(--gap)*-1)+var(--toast-swipe-movement-y))]\",\r\n          // Position\r\n          \"absolute z-[calc(1000-var(--toast-index))] w-full\",\r\n          isTop ? \"top-0 right-0 left-0\" : \"right-0 bottom-0 left-0\",\r\n          isTop ? \"origin-top\" : \"origin-bottom\",\r\n          // Default transform\r\n          isTop\r\n            ? \"[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--toast-swipe-movement-y)+(var(--toast-index)*var(--peek))+(var(--shrink)*var(--height))))_scale(var(--scale))]\"\r\n            : \"[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--toast-swipe-movement-y)-(var(--toast-index)*var(--peek))-(var(--shrink)*var(--height))))_scale(var(--scale))]\",\r\n          // Visual styles\r\n          \"rounded-md border bg-clip-padding p-4 shadow-[0_6px_20px_0_oklch(0.18_0_0_/_0.12)] select-none\",\r\n          \"border-border/70\",\r\n          // After element for spacing\r\n          'after:absolute after:left-0 after:h-[calc(var(--gap)+1px)] after:w-full after:content-[\"\"]',\r\n          isTop ? \"after:bottom-full\" : \"after:top-full\",\r\n          // Opacity\r\n          \"data-[ending-style]:opacity-0\",\r\n          // Expanded state\r\n          \"data-[expanded]:[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--offset-y)))]\",\r\n          \"data-[limited]:opacity-0\",\r\n          // Starting animation\r\n          isTop\r\n            ? \"data-[starting-style]:[transform:translateY(-150%)]\"\r\n            : \"data-[starting-style]:[transform:translateY(150%)]\",\r\n          // Default ending (X button - no swipe)\r\n          isTop\r\n            ? \"[&[data-ending-style]:not([data-limited]):not([data-swipe-direction])]:[transform:translateY(-150%)]\"\r\n            : \"[&[data-ending-style]:not([data-limited]):not([data-swipe-direction])]:[transform:translateY(150%)]\",\r\n          // Swipe endings\r\n          \"data-[ending-style]:data-[swipe-direction=down]:[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--toast-swipe-movement-y)+150%))]\",\r\n          \"data-[expanded]:data-[ending-style]:data-[swipe-direction=down]:[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--toast-swipe-movement-y)+150%))]\",\r\n          \"data-[ending-style]:data-[swipe-direction=left]:[transform:translateX(calc(var(--toast-swipe-movement-x)-150%))_translateY(var(--offset-y))]\",\r\n          \"data-[expanded]:data-[ending-style]:data-[swipe-direction=left]:[transform:translateX(calc(var(--toast-swipe-movement-x)-150%))_translateY(var(--offset-y))]\",\r\n          \"data-[ending-style]:data-[swipe-direction=right]:[transform:translateX(calc(var(--toast-swipe-movement-x)+150%))_translateY(var(--offset-y))]\",\r\n          \"data-[expanded]:data-[ending-style]:data-[swipe-direction=right]:[transform:translateX(calc(var(--toast-swipe-movement-x)+150%))_translateY(var(--offset-y))]\",\r\n          \"data-[ending-style]:data-[swipe-direction=up]:[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--toast-swipe-movement-y)-150%))]\",\r\n          \"data-[expanded]:data-[ending-style]:data-[swipe-direction=up]:[transform:translateX(var(--toast-swipe-movement-x))_translateY(calc(var(--toast-swipe-movement-y)-150%))]\",\r\n          // Height\r\n          \"h-[var(--height)]\",\r\n          \"data-[expanded]:h-[var(--toast-height)]\",\r\n          // Transitions\r\n          \"[transition:transform_0.5s_cubic-bezier(0.22,1,0.36,1),opacity_0.5s,height_0.15s]\",\r\n          // Type-based colors\r\n          {\r\n            \"border-border bg-card text-card-foreground\": type === \"default\",\r\n            \"border-success-border bg-success text-success-foreground\":\r\n              type === \"success\",\r\n            \"border-danger-border bg-danger text-danger-foreground\":\r\n              type === \"error\",\r\n            \"border-warning-border bg-warning text-warning-foreground\":\r\n              type === \"warning\",\r\n            \"border-info-border bg-info text-info-foreground\": type === \"info\",\r\n          },\r\n        )}\r\n      >\r\n        <Toast.Content\r\n          className={clsx(\r\n            \"overflow-hidden transition-opacity duration-[250ms]\",\r\n            \"data-[behind]:opacity-0 data-[expanded]:opacity-100\",\r\n          )}\r\n        >\r\n          {hasCustomJSX ? (\r\n            // Render custom JSX content\r\n            <div className=\"w-full\">\r\n              {hasCustomJSX &&\r\n              toastData.data &&\r\n              typeof toastData.data === \"object\" &&\r\n              \"customJSX\" in toastData.data\r\n                ? (toastData.data as Record<string, React.ReactNode>).customJSX\r\n                : null}\r\n            </div>\r\n          ) : (\r\n            // Render standard toast content\r\n            <>\r\n              <Toast.Title className=\"text-[0.975rem] leading-5 font-medium\" />\r\n              <Toast.Description className=\"text-[0.925rem] leading-5 text-gray-700 dark:text-gray-300\" />\r\n              <Toast.Action className=\"ml-auto cursor-pointer text-xs font-medium underline-offset-2 hover:underline\" />\r\n              <Toast.Close\r\n                className=\"text-muted-foreground hover:bg-accent/50 hover:text-foreground absolute top-2.5 right-2.5 flex h-6 w-6 items-center justify-center rounded-md border-none bg-transparent transition-colors duration-200\"\r\n                aria-label=\"Close\"\r\n              >\r\n                <XIcon className=\"h-4 w-4\" />\r\n              </Toast.Close>\r\n            </>\r\n          )}\r\n        </Toast.Content>\r\n      </Toast.Root>\r\n    );\r\n  });\r\n}\r\n\r\nfunction XIcon(props: React.ComponentProps<\"svg\">) {\r\n  return (\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"24\"\r\n      height=\"24\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"none\"\r\n      stroke=\"currentColor\"\r\n      strokeWidth=\"2\"\r\n      strokeLinecap=\"round\"\r\n      strokeLinejoin=\"round\"\r\n      {...props}\r\n    >\r\n      <path d=\"M18 6 6 18\" />\r\n      <path d=\"m6 6 12 12\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport { Toast };\r\n",
      "type": "registry:ui",
      "target": "components/ui/cubby-ui/toast.tsx"
    }
  ]
}