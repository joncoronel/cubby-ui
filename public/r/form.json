{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "form",
  "type": "registry:ui",
  "title": "Form",
  "description": "A form component.",
  "dependencies": [
    "@conform-to/react"
  ],
  "registryDependencies": [
    "@cubby-ui/label"
  ],
  "files": [
    {
      "path": "registry/default/form/form.tsx",
      "content": "\"use client\";\n\n/**\n * Conform-based Form Components\n *\n * Usage example:\n *\n * ```tsx\n * import { useForm } from \"@conform-to/react\"\n * import { parseWithZod } from \"@conform-to/zod\"\n * import { z } from \"zod\"\n * import { Input } from \"@/registry/default/input/input\"\n *\n * const schema = z.object({\n *   email: z.string().email(),\n *   password: z.string().min(6)\n * })\n *\n * function MyForm() {\n *   const [form, fields] = useForm({\n *     onValidate({ formData }) {\n *       return parseWithZod(formData, { schema })\n *     }\n *   })\n *\n *   return (\n *     <Form form={form} fields={fields}>\n *       <FormField name=\"email\">\n *         <FormItem>\n *           <FormLabel>Email</FormLabel>\n *           <FormControl>\n *             <Input\n *               type=\"email\"\n *               name={fields.email.name}\n *               defaultValue={fields.email.initialValue}\n *               placeholder=\"Enter your email\"\n *             />\n *           </FormControl>\n *           <FormDescription>Enter your email address</FormDescription>\n *           <FormMessage />\n *         </FormItem>\n *       </FormField>\n *       <FormField name=\"password\">\n *         <FormItem>\n *           <FormLabel>Password</FormLabel>\n *           <FormControl>\n *             <Input\n *               type=\"password\"\n *               name={fields.password.name}\n *               defaultValue={fields.password.initialValue}\n *               placeholder=\"Enter your password\"\n *             />\n *           </FormControl>\n *           <FormDescription>Must be at least 6 characters</FormDescription>\n *           <FormMessage />\n *         </FormItem>\n *       </FormField>\n *       <button type=\"submit\">Submit</button>\n *     </Form>\n *   )\n * }\n * ```\n */\n\nimport * as React from \"react\";\nimport { useForm, type FieldMetadata } from \"@conform-to/react\";\nimport { Label } from \"@/registry/default/label/label\";\nimport { cn } from \"@/lib/utils\";\n\n// Form context for sharing form instance\ntype FormContextValue = {\n  form: ReturnType<typeof useForm>[0];\n  fields: Record<string, FieldMetadata>;\n};\n\nconst FormContext = React.createContext<FormContextValue | null>(null);\n\n// Form provider component\nfunction Form({\n  form,\n  fields,\n  children,\n  ...props\n}: React.ComponentProps<\"form\"> & {\n  form: ReturnType<typeof useForm>[0];\n  fields: Record<string, FieldMetadata>;\n}) {\n  return (\n    <FormContext.Provider value={{ form, fields }}>\n      <form id={form.id} onSubmit={form.onSubmit} {...props}>\n        {children}\n      </form>\n    </FormContext.Provider>\n  );\n}\n\n// Hook to access form context\nconst useFormField = (name: string) => {\n  const context = React.useContext(FormContext);\n  const itemContext = React.useContext(FormItemContext);\n\n  if (!context) {\n    throw new Error(\"useFormField should be used within <Form>\");\n  }\n\n  const { fields } = context;\n  const field = fields[name];\n\n  if (!field) {\n    throw new Error(`Field \"${name}\" not found in form fields`);\n  }\n\n  const { id } = itemContext;\n\n  return {\n    id,\n    name: field.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    error: field.errors?.[0],\n    errors: field.errors,\n    initialValue: field.initialValue,\n    value: field.value,\n    key: field.key,\n  };\n};\n\n// Form field wrapper\nfunction FormField({\n  name,\n  children,\n}: {\n  name: string;\n  children: React.ReactNode;\n}) {\n  return <FormFieldProvider name={name}>{children}</FormFieldProvider>;\n}\n\n// Form field context\ntype FormFieldContextValue = {\n  name: string;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue | null>(\n  null,\n);\n\nfunction FormFieldProvider({\n  name,\n  children,\n}: {\n  name: string;\n  children: React.ReactNode;\n}) {\n  return (\n    <FormFieldContext.Provider value={{ name }}>\n      {children}\n    </FormFieldContext.Provider>\n  );\n}\n\n// Form item context\ntype FormItemContextValue = {\n  id: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue,\n);\n\nfunction FormItem({ className, ...props }: React.ComponentProps<\"div\">) {\n  const id = React.useId();\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div\n        data-slot=\"form-item\"\n        className={cn(\"group grid gap-2\", className)}\n        {...props}\n      />\n    </FormItemContext.Provider>\n  );\n}\n\nfunction FormLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof Label>) {\n  const fieldContext = React.useContext(FormFieldContext);\n\n  if (!fieldContext) {\n    throw new Error(\"FormLabel should be used within <FormField>\");\n  }\n\n  const { error, formItemId } = useFormField(fieldContext.name);\n\n  return (\n    <Label\n      data-slot=\"form-label\"\n      data-error={!!error}\n      className={cn(\"data-[error=true]:text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  );\n}\n\nfunction FormControl({ ...props }: React.ComponentProps<\"div\">) {\n  const fieldContext = React.useContext(FormFieldContext);\n\n  if (!fieldContext) {\n    throw new Error(\"FormControl should be used within <FormField>\");\n  }\n\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField(\n    fieldContext.name,\n  );\n\n  return (\n    <div\n      data-slot=\"form-control\"\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  );\n}\n\nfunction FormDescription({ className, ...props }: React.ComponentProps<\"p\">) {\n  const fieldContext = React.useContext(FormFieldContext);\n\n  if (!fieldContext) {\n    throw new Error(\"FormDescription should be used within <FormField>\");\n  }\n\n  const { formDescriptionId } = useFormField(fieldContext.name);\n\n  return (\n    <p\n      data-slot=\"form-description\"\n      id={formDescriptionId}\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  );\n}\n\nfunction FormMessage({ className, ...props }: React.ComponentProps<\"p\">) {\n  const fieldContext = React.useContext(FormFieldContext);\n\n  if (!fieldContext) {\n    throw new Error(\"FormMessage should be used within <FormField>\");\n  }\n\n  const { error, formMessageId } = useFormField(fieldContext.name);\n  const body = error ? String(error) : props.children;\n\n  if (!body) {\n    return null;\n  }\n\n  return (\n    <p\n      data-slot=\"form-message\"\n      id={formMessageId}\n      className={cn(\"text-destructive text-sm\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  );\n}\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n};\n",
      "type": "registry:ui",
      "target": "components/ui/cubby-ui/form.tsx"
    }
  ]
}