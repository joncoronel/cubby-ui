{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "data-table",
  "type": "registry:ui",
  "title": "Data Table",
  "description": "A data-table component.",
  "dependencies": [
    "@tanstack/react-table",
    "@hugeicons/react",
    "@hugeicons/core-free-icons"
  ],
  "registryDependencies": [
    "@cubby-ui/checkbox",
    "@cubby-ui/table"
  ],
  "files": [
    {
      "path": "registry/default/data-table/data-table.tsx",
      "content": "\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport {\r\n\tuseReactTable,\r\n\tgetCoreRowModel,\r\n\tgetSortedRowModel,\r\n\tgetFilteredRowModel,\r\n\tgetPaginationRowModel,\r\n\tflexRender,\r\n\ttype ColumnDef,\r\n\ttype SortingState,\r\n\ttype RowSelectionState,\r\n\ttype ColumnFiltersState,\r\n\ttype PaginationState,\r\n\ttype VisibilityState,\r\n\ttype OnChangeFn,\r\n\ttype Row,\r\n\ttype Column,\r\n} from \"@tanstack/react-table\"\r\nimport { HugeiconsIcon } from \"@hugeicons/react\"\r\nimport {\r\n\tSortByDown01Icon,\r\n\tSortByUp01Icon,\r\n\tArrowUpDownIcon,\r\n\tSearch01Icon,\r\n} from \"@hugeicons/core-free-icons\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Checkbox } from \"@/registry/default/checkbox/checkbox\"\r\nimport {\r\n\tTable,\r\n\tTableBody,\r\n\tTableCell,\r\n\tTableHead,\r\n\tTableHeader,\r\n\tTableRow,\r\n\ttype TableProps,\r\n} from \"@/registry/default/table/table\"\r\nimport { ColumnVisibilityPopover } from \"@/registry/default/data-table/column-visibility-popover\"\r\n\r\n// Internal component for sortable column headers\r\nfunction SortableHeader<TData>({\r\n\tcolumn,\r\n\tchildren,\r\n\talign,\r\n\tisFirst,\r\n\tisLast,\r\n}: {\r\n\tcolumn: Column<TData, unknown>\r\n\tchildren: React.ReactNode\r\n\talign?: \"left\" | \"center\" | \"right\"\r\n\tisFirst?: boolean\r\n\tisLast?: boolean\r\n}) {\r\n\treturn (\r\n\t\t<button\r\n\t\t\ttype=\"button\"\r\n\t\t\tclassName={cn(\r\n\t\t\t\t\"group -mx-3 -my-2 flex w-[calc(100%+1.5rem)] cursor-pointer items-center gap-1.5 px-3 py-2 hover:bg-accent/50\",\r\n\t\t\t\talign === \"right\" && \"justify-end\",\r\n\t\t\t\talign === \"center\" && \"justify-center\",\r\n\t\t\t\tisFirst && \"rounded-l-lg\",\r\n\t\t\t\tisLast && \"rounded-r-lg\"\r\n\t\t\t)}\r\n\t\t\tonClick={() => column.toggleSorting(column.getIsSorted() === \"asc\")}\r\n\t\t>\r\n\t\t\t{children}\r\n\t\t\t{column.getIsSorted() === \"asc\" ? (\r\n\t\t\t\t<HugeiconsIcon icon={SortByUp01Icon} strokeWidth={2} className=\"size-4\" />\r\n\t\t\t) : column.getIsSorted() === \"desc\" ? (\r\n\t\t\t\t<HugeiconsIcon icon={SortByDown01Icon} strokeWidth={2} className=\"size-4\" />\r\n\t\t\t) : (\r\n\t\t\t\t<HugeiconsIcon icon={ArrowUpDownIcon} strokeWidth={2} className=\"size-4 opacity-0 group-hover:opacity-50\" />\r\n\t\t\t)}\r\n\t\t</button>\r\n\t)\r\n}\r\n\r\nexport interface DataTableProps<TData, TValue>\r\n\textends Omit<TableProps, \"children\"> {\r\n\tcolumns: ColumnDef<TData, TValue>[]\r\n\tdata: TData[]\r\n\r\n\t// Feature flags\r\n\tenableSorting?: boolean\r\n\tenableRowSelection?: boolean | ((row: Row<TData>) => boolean)\r\n\tenableMultiRowSelection?: boolean\r\n\tenableFiltering?: boolean\r\n\tenablePagination?: boolean\r\n\tenableColumnVisibility?: boolean\r\n\r\n\t// Selection options\r\n\tshowSelectionColumn?: boolean\r\n\r\n\t// Controlled state\r\n\tsorting?: SortingState\r\n\tonSortingChange?: OnChangeFn<SortingState>\r\n\trowSelection?: RowSelectionState\r\n\tonRowSelectionChange?: OnChangeFn<RowSelectionState>\r\n\tcolumnFilters?: ColumnFiltersState\r\n\tonColumnFiltersChange?: OnChangeFn<ColumnFiltersState>\r\n\tpagination?: PaginationState\r\n\tonPaginationChange?: OnChangeFn<PaginationState>\r\n\tcolumnVisibility?: VisibilityState\r\n\tonColumnVisibilityChange?: OnChangeFn<VisibilityState>\r\n\r\n\t// Row identity\r\n\tgetRowId?: (originalRow: TData, index: number, parent?: Row<TData>) => string\r\n\r\n\t// Customization\r\n\temptyState?: React.ReactNode\r\n\r\n\t// Toolbar\r\n\tglobalFilter?: string\r\n\tonGlobalFilterChange?: (value: string) => void\r\n\tsearchPlaceholder?: string\r\n\ttoolbar?: React.ReactNode\r\n\ttoolbarLeft?: React.ReactNode\r\n\ttoolbarRight?: React.ReactNode\r\n}\r\n\r\nfunction DataTable<TData, TValue>({\r\n\tcolumns: userColumns,\r\n\tdata,\r\n\t// Feature flags\r\n\tenableSorting = false,\r\n\tenableRowSelection = false,\r\n\tenableMultiRowSelection = true,\r\n\tenableFiltering = false,\r\n\tenablePagination = false,\r\n\tenableColumnVisibility = false,\r\n\t// Selection options\r\n\tshowSelectionColumn = true,\r\n\t// Controlled state\r\n\tsorting: controlledSorting,\r\n\tonSortingChange,\r\n\trowSelection: controlledRowSelection,\r\n\tonRowSelectionChange,\r\n\tcolumnFilters: controlledColumnFilters,\r\n\tonColumnFiltersChange,\r\n\tpagination: controlledPagination,\r\n\tonPaginationChange,\r\n\tcolumnVisibility: controlledColumnVisibility,\r\n\tonColumnVisibilityChange,\r\n\t// Row identity\r\n\tgetRowId,\r\n\t// Customization\r\n\temptyState,\r\n\t// Toolbar\r\n\tglobalFilter: controlledGlobalFilter,\r\n\tonGlobalFilterChange,\r\n\tsearchPlaceholder,\r\n\ttoolbar,\r\n\ttoolbarLeft,\r\n\ttoolbarRight,\r\n\t// Table visual props\r\n\tbordered,\r\n\tstriped,\r\n\thoverable,\r\n\tstickyHeader,\r\n\t...tableProps\r\n}: DataTableProps<TData, TValue>) {\r\n\t// Internal state for uncontrolled mode\r\n\tconst [internalSorting, setInternalSorting] = React.useState<SortingState>([])\r\n\tconst [internalRowSelection, setInternalRowSelection] =\r\n\t\tReact.useState<RowSelectionState>({})\r\n\tconst [internalColumnFilters, setInternalColumnFilters] =\r\n\t\tReact.useState<ColumnFiltersState>([])\r\n\tconst [internalPagination, setInternalPagination] =\r\n\t\tReact.useState<PaginationState>({\r\n\t\t\tpageIndex: 0,\r\n\t\t\tpageSize: 10,\r\n\t\t})\r\n\tconst [internalGlobalFilter, setInternalGlobalFilter] = React.useState(\"\")\r\n\tconst [internalColumnVisibility, setInternalColumnVisibility] =\r\n\t\tReact.useState<VisibilityState>({})\r\n\r\n\t// Use controlled state if provided, otherwise use internal state\r\n\tconst sorting = controlledSorting ?? internalSorting\r\n\tconst rowSelection = controlledRowSelection ?? internalRowSelection\r\n\tconst columnFilters = controlledColumnFilters ?? internalColumnFilters\r\n\tconst pagination = controlledPagination ?? internalPagination\r\n\tconst globalFilter = controlledGlobalFilter ?? internalGlobalFilter\r\n\tconst columnVisibility = controlledColumnVisibility ?? internalColumnVisibility\r\n\r\n\t// Determine if toolbar should be shown\r\n\tconst hasToolbar = Boolean(\r\n\t\ttoolbar || toolbarLeft || toolbarRight || onGlobalFilterChange || enableColumnVisibility\r\n\t)\r\n\r\n\t// Build columns with optional selection column\r\n\tconst columns = React.useMemo(() => {\r\n\t\tif (!enableRowSelection || !showSelectionColumn) {\r\n\t\t\treturn userColumns\r\n\t\t}\r\n\r\n\t\tconst selectionColumn: ColumnDef<TData, unknown> = {\r\n\t\t\tid: \"__select__\",\r\n\t\t\theader: ({ table }) =>\r\n\t\t\t\tenableMultiRowSelection ? (\r\n\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\tchecked={table.getIsAllPageRowsSelected()}\r\n\t\t\t\t\t\t\tindeterminate={\r\n\t\t\t\t\t\t\t\ttable.getIsSomePageRowsSelected() &&\r\n\t\t\t\t\t\t\t\t!table.getIsAllPageRowsSelected()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonCheckedChange={(value) =>\r\n\t\t\t\t\t\t\t\ttable.toggleAllPageRowsSelected(!!value)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taria-label=\"Select all\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null,\r\n\t\t\tcell: ({ row }) => (\r\n\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\tchecked={row.getIsSelected()}\r\n\t\t\t\t\t\tdisabled={!row.getCanSelect()}\r\n\t\t\t\t\t\tonCheckedChange={(value) => row.toggleSelected(!!value)}\r\n\t\t\t\t\t\taria-label=\"Select row\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t\tenableSorting: false,\r\n\t\t\tenableHiding: false,\r\n\t\t}\r\n\r\n\t\treturn [selectionColumn, ...userColumns]\r\n\t}, [userColumns, enableRowSelection, enableMultiRowSelection, showSelectionColumn])\r\n\r\n\tconst table = useReactTable({\r\n\t\tdata,\r\n\t\tcolumns,\r\n\t\tgetRowId,\r\n\t\tstate: {\r\n\t\t\tsorting,\r\n\t\t\trowSelection,\r\n\t\t\tcolumnFilters,\r\n\t\t\tpagination,\r\n\t\t\tglobalFilter,\r\n\t\t\tcolumnVisibility,\r\n\t\t},\r\n\t\tonSortingChange: onSortingChange ?? setInternalSorting,\r\n\t\tonRowSelectionChange: onRowSelectionChange ?? setInternalRowSelection,\r\n\t\tonColumnFiltersChange: onColumnFiltersChange ?? setInternalColumnFilters,\r\n\t\tonPaginationChange: onPaginationChange ?? setInternalPagination,\r\n\t\tonGlobalFilterChange: onGlobalFilterChange ?? setInternalGlobalFilter,\r\n\t\tonColumnVisibilityChange: onColumnVisibilityChange ?? setInternalColumnVisibility,\r\n\t\tgetCoreRowModel: getCoreRowModel(),\r\n\t\t...(enableSorting && { getSortedRowModel: getSortedRowModel() }),\r\n\t\t...((enableFiltering || hasToolbar) && { getFilteredRowModel: getFilteredRowModel() }),\r\n\t\t...(enablePagination && { getPaginationRowModel: getPaginationRowModel() }),\r\n\t\tenableRowSelection,\r\n\t\tenableMultiRowSelection,\r\n\t\tglobalFilterFn: \"includesString\",\r\n\t})\r\n\r\n\t// Calculate total columns for empty state\r\n\tconst totalColumns = columns.length\r\n\r\n\t// Render header content with automatic sortable wrapper for string headers\r\n\tconst renderHeader = (\r\n\t\theader: ReturnType<typeof table.getHeaderGroups>[0][\"headers\"][0],\r\n\t\tindex: number,\r\n\t\ttotalHeaders: number\r\n\t) => {\r\n\t\tif (header.isPlaceholder) return null\r\n\r\n\t\tconst headerDef = header.column.columnDef.header\r\n\t\tconst canSort = header.column.getCanSort()\r\n\t\tconst meta = header.column.columnDef.meta as { align?: \"left\" | \"center\" | \"right\" } | undefined\r\n\r\n\t\t// If header is a string and sorting is enabled, wrap with SortableHeader\r\n\t\tif (typeof headerDef === \"string\" && enableSorting && canSort) {\r\n\t\t\treturn (\r\n\t\t\t\t<SortableHeader\r\n\t\t\t\t\tcolumn={header.column}\r\n\t\t\t\t\talign={meta?.align}\r\n\t\t\t\t\tisFirst={index === 0}\r\n\t\t\t\t\tisLast={index === totalHeaders - 1}\r\n\t\t\t\t>\r\n\t\t\t\t\t{headerDef}\r\n\t\t\t\t</SortableHeader>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\t// Otherwise render normally (custom render function or non-sortable)\r\n\t\treturn flexRender(headerDef, header.getContext())\r\n\t}\r\n\r\n\tconst tableElement = (\r\n\t\t<Table\r\n\t\t\tbordered={bordered}\r\n\t\t\tstriped={striped}\r\n\t\t\thoverable={hoverable}\r\n\t\t\tstickyHeader={stickyHeader}\r\n\t\t\tclassName={cn(hasToolbar && \"rounded-t-none ring-0\")}\r\n\t\t\t{...tableProps}\r\n\t\t>\r\n\t\t\t<TableHeader>\r\n\t\t\t\t{table.getHeaderGroups().map((headerGroup) => (\r\n\t\t\t\t\t<TableRow key={headerGroup.id}>\r\n\t\t\t\t\t\t{headerGroup.headers.map((header, index) => (\r\n\t\t\t\t\t\t\t<TableHead\r\n\t\t\t\t\t\t\t\tkey={header.id}\r\n\t\t\t\t\t\t\t\tcolSpan={header.colSpan}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{renderHeader(header, index, headerGroup.headers.length)}\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t))}\r\n\t\t\t</TableHeader>\r\n\t\t\t<TableBody>\r\n\t\t\t\t{table.getRowModel().rows?.length ? (\r\n\t\t\t\t\ttable.getRowModel().rows.map((row) => (\r\n\t\t\t\t\t\t<TableRow key={row.id} selected={row.getIsSelected()}>\r\n\t\t\t\t\t\t\t{row.getVisibleCells().map((cell) => (\r\n\t\t\t\t\t\t\t\t<TableCell key={cell.id}>\r\n\t\t\t\t\t\t\t\t\t{flexRender(cell.column.columnDef.cell, cell.getContext())}\r\n\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t))\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t<TableCell colSpan={totalColumns} className=\"h-24 text-center\">\r\n\t\t\t\t\t\t\t{emptyState ?? \"No results.\"}\r\n\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t)}\r\n\t\t\t</TableBody>\r\n\t\t</Table>\r\n\t)\r\n\r\n\tif (!hasToolbar) {\r\n\t\treturn tableElement\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"bg-card ring-border/60 w-full rounded-2xl ring-1 md:max-w-2xl\">\r\n\t\t\t<div className=\"flex items-center gap-2 px-2 pt-2\">\r\n\t\t\t\t{toolbar ?? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{toolbarLeft}\r\n\t\t\t\t\t\t{toolbarLeft && <div className=\"bg-border/60 h-5 w-px\" />}\r\n\r\n\t\t\t\t\t\t<div className=\"flex flex-1 items-center gap-2\">\r\n\t\t\t\t\t\t\t<HugeiconsIcon\r\n\t\t\t\t\t\t\t\ticon={Search01Icon}\r\n\t\t\t\t\t\t\t\tclassName=\"text-muted-foreground size-4\"\r\n\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder={searchPlaceholder ?? \"Search and filter\"}\r\n\t\t\t\t\t\t\t\tvalue={globalFilter}\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tonGlobalFilterChange\r\n\t\t\t\t\t\t\t\t\t\t? onGlobalFilterChange(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t: setInternalGlobalFilter(e.target.value)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"placeholder:text-muted-foreground flex-1 bg-transparent text-sm outline-none\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{enableColumnVisibility && (\r\n\t\t\t\t\t\t\t<ColumnVisibilityPopover table={table} />\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{toolbarRight}\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t{tableElement}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport { DataTable }\r\nexport type { ColumnDef, SortingState, RowSelectionState, ColumnFiltersState, VisibilityState }\r\n",
      "type": "registry:ui",
      "target": "components/ui/cubby-ui/data-table.tsx"
    }
  ]
}