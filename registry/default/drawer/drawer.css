/* -------------------------------------------------------------------------------------------------
 * Drawer Scroll-Driven Animations (Progressive Enhancement)
 * Chrome 115+, Safari 26+ (future), Firefox flag-only
 * -------------------------------------------------------------------------------------------------*/

/**
 * CSS Custom Property for scroll-driven drawer animations
 * Allows consumers to animate content based on snap progress:
 * .mini-player { opacity: calc(1 - var(--drawer-snap-progress, 0)); }
 * .full-player { opacity: var(--drawer-snap-progress, 0); }
 */
@property --drawer-snap-progress {
  syntax: "<number>";
  inherits: true;
  initial-value: 0;
}

/**
 * Animates --drawer-snap-progress from 0 to 1 based on scroll position
 * Applied to drawer viewport with animation-timeline: scroll()
 */
@keyframes drawer-snap-progress {
  from {
    --drawer-snap-progress: 0;
  }
  to {
    --drawer-snap-progress: 1;
  }
}

/**
 * Animates backdrop opacity based on drawer panel visibility (view timeline)
 * Uses view() timeline - opacity naturally scales with how much drawer is visible
 * Applied to drawer backdrop with animation-timeline: --drawer-panel
 */
@keyframes drawer-backdrop-fade {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/**
 * Exit animation for drawer backdrop
 * Animates from current opacity to 0 (no 'from' = starts from computed value)
 * Used to override scroll-driven animations which transitions can't interpolate from
 */
@keyframes drawer-backdrop-exit {
  to {
    opacity: 0;
  }
}

html:has([data-slot="drawer-viewport"][data-direction="left"]),
html:has([data-slot="drawer-viewport"][data-direction="right"]) {
  overscroll-behavior: none;
  scrollbar-width: none;
}

html:has(
    [data-slot="drawer-viewport"][data-direction="left"]
  )::-webkit-scrollbar,
html:has(
    [data-slot="drawer-viewport"][data-direction="right"]
  )::-webkit-scrollbar {
  display: none !important;
}
